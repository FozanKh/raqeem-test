<!DOCTYPE html>
<html ng-app="raqeemApp">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<!-- Content Security Policy - Critical Security Constraint -->
		<meta
			http-equiv="Content-Security-Policy"
			content="script-src 'self' 'unsafe-inline' 'unsafe-eval' https://ajax.googleapis.com https://t.contentsquare.net https://uxamanager.contentsquare.com" />

		<!-- Contentsquare Tracking Tag - Placed high in head as per requirements -->
		<script type="text/javascript">
			// Contentsquare Tag Initialization
			window._uxa = window._uxa || [];

			// Mock Contentsquare tag for simulation purposes
			(function () {
				var csqScript = document.createElement("script");
				csqScript.type = "text/javascript";
				csqScript.async = true;
				csqScript.src = "csq-mock.js"; // Mock CSQ script
				var s = document.getElementsByTagName("script")[0];
				s.parentNode.insertBefore(csqScript, s);
			})();
		</script>

		<title>Raqeem - ANAT SA</title>

		<style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			body {
				font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
				background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
				min-height: 100vh;
				direction: rtl;
			}

			.container {
				max-width: 1200px;
				margin: 0 auto;
				padding: 20px;
			}

			/* Login Page Styles */
			.login-container {
				display: flex;
				justify-content: center;
				align-items: center;
				min-height: 100vh;
			}

			.login-box {
				background: white;
				padding: 40px;
				border-radius: 10px;
				box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
				width: 100%;
				max-width: 400px;
			}

			.login-box h1 {
				text-align: center;
				color: #667eea;
				margin-bottom: 30px;
				font-size: 28px;
			}

			.form-group {
				margin-bottom: 20px;
			}

			.form-group label {
				display: block;
				margin-bottom: 8px;
				color: #333;
				font-weight: 500;
			}

			.form-group input {
				width: 100%;
				padding: 12px;
				border: 2px solid #e0e0e0;
				border-radius: 5px;
				font-size: 14px;
				transition: border-color 0.3s;
			}

			.form-group input:focus {
				outline: none;
				border-color: #667eea;
			}

			.btn {
				width: 100%;
				padding: 12px;
				background: #667eea;
				color: white;
				border: none;
				border-radius: 5px;
				font-size: 16px;
				font-weight: 600;
				cursor: pointer;
				transition: background 0.3s;
			}

			.btn:hover {
				background: #5568d3;
			}

			.error-message {
				color: #e74c3c;
				font-size: 14px;
				margin-top: 10px;
				text-align: center;
			}

			/* Dashboard Styles */
			.dashboard {
				min-height: 100vh;
			}

			.header {
				background: white;
				padding: 20px;
				box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
				margin-bottom: 30px;
				display: flex;
				justify-content: space-between;
				align-items: center;
			}

			.header h1 {
				color: #667eea;
				font-size: 24px;
			}

			.header .user-info {
				display: flex;
				align-items: center;
				gap: 15px;
			}

			.header .username {
				color: #333;
				font-weight: 500;
			}

			.btn-logout {
				padding: 8px 20px;
				background: #e74c3c;
				color: white;
				border: none;
				border-radius: 5px;
				cursor: pointer;
				font-size: 14px;
				transition: background 0.3s;
			}

			.btn-logout:hover {
				background: #c0392b;
			}

			.dashboard-content {
				background: white;
				padding: 30px;
				border-radius: 10px;
				box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
			}

			.dashboard-content h2 {
				color: #333;
				margin-bottom: 20px;
			}

			.stats-grid {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
				gap: 20px;
				margin-top: 30px;
			}

			.stat-card {
				background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
				color: white;
				padding: 25px;
				border-radius: 8px;
				cursor: pointer;
				transition: transform 0.3s;
			}

			.stat-card:hover {
				transform: translateY(-5px);
			}

			.stat-card h3 {
				font-size: 18px;
				margin-bottom: 10px;
			}

			.stat-card .stat-value {
				font-size: 32px;
				font-weight: bold;
			}

			.console-log {
				position: fixed;
				bottom: 0;
				left: 0;
				right: 0;
				background: #1e1e1e;
				color: #00ff00;
				padding: 15px;
				font-family: "Courier New", monospace;
				font-size: 12px;
				max-height: 200px;
				overflow-y: auto;
				border-top: 3px solid #667eea;
				z-index: 1000;
			}

			.console-log .log-entry {
				margin-bottom: 5px;
				padding: 3px 0;
			}

			.console-log .log-entry.success {
				color: #00ff00;
			}

			.console-log .log-entry.error {
				color: #ff0000;
			}

			.console-log .log-entry.info {
				color: #00bfff;
			}

			.hidden {
				display: none;
			}
		</style>
	</head>
	<body>
		<!-- Login View -->
		<div ng-if="currentView === 'login'" class="login-container">
			<div class="login-box">
				<h1>رقيم - ANAT SA</h1>
				<form ng-submit="login()">
					<div class="form-group">
						<label>اسم المستخدم / Username</label>
						<input type="text" ng-model="credentials.username" placeholder="أدخل اسم المستخدم" required />
					</div>
					<div class="form-group">
						<label>كلمة المرور / Password</label>
						<input type="password" ng-model="credentials.password" placeholder="أدخل كلمة المرور" required />
					</div>
					<button type="submit" class="btn">تسجيل الدخول / Login</button>
					<div ng-if="loginError" class="error-message">{{loginError}}</div>
				</form>
			</div>
		</div>

		<!-- Dashboard View -->
		<div ng-if="currentView === 'dashboard'" class="dashboard">
			<div class="header">
				<h1>لوحة التحكم / Dashboard</h1>
				<div class="user-info">
					<span class="username">مرحباً، {{currentUser}}</span>
					<button class="btn-logout" ng-click="logout()">تسجيل الخروج / Logout</button>
				</div>
			</div>

			<div class="container">
				<div class="dashboard-content">
					<h2>مرحباً بك في نظام رقيم</h2>
					<p>Welcome to Raqeem System - ANAT SA</p>

					<div class="stats-grid">
						<div class="stat-card" ng-click="trackClick('stat-card-1')">
							<h3>إجمالي المستندات</h3>
							<div class="stat-value">1,234</div>
						</div>
						<div class="stat-card" ng-click="trackClick('stat-card-2')">
							<h3>المستندات النشطة</h3>
							<div class="stat-value">856</div>
						</div>
						<div class="stat-card" ng-click="trackClick('stat-card-3')">
							<h3>المستخدمون</h3>
							<div class="stat-value">42</div>
						</div>
						<div class="stat-card" ng-click="trackClick('stat-card-4')">
							<h3>التقارير</h3>
							<div class="stat-value">18</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Console Log Display -->
		<div class="console-log">
			<div ng-repeat="log in consoleLogs track by $index" class="log-entry" ng-class="log.type">
				[{{log.timestamp}}] {{log.message}}
			</div>
		</div>

		<!-- AngularJS 1.6.5 -->
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.5/angular.min.js"></script>

		<!-- Application Script -->
		<script src="app.js"></script>
	</body>
</html>
